<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Home - Technical Reference</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Technical Reference</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/agglayer/vault-bridge" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div align="center">
<h1 id="vault-bridge"><a class="header" href="#vault-bridge">Vault Bridge</a></h1>
<p><strong><a href="#deployments">‚õìÔ∏è Deployments</a></strong>
<strong>¬†¬† <a href="#documentation">üìó Documentation</a></strong>
<strong>¬†¬† <a href="https://www.agglayer.dev/agglayer-vaultbridge">üß≠ Website</a></strong>
<strong>¬†¬† <a href="https://github.com/agglayer/vault-bridge/">üêà‚Äç‚¨õ GitHub</a></strong></p>
</div>
<br>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#overview">Overview</a>
<ul>
<li><a href="#tldr">TL;DR</a></li>
<li><a href="#vault-bridge-token">Vault Bridge Token</a></li>
<li><a href="#migration-manager">Migration Manager</a></li>
<li><a href="#custom-token">Custom Token</a></li>
<li><a href="#native-converter">Native Converter</a></li>
</ul>
</li>
<li><a href="#get-started">Get Started</a></li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#deployments">Deployments</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#license">License</a></li>
</ul>
<br>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Vault Bridge enables chains and apps to generate native yield on TVL by putting bridged assets to work.</p>
<p>The protocol is comprised of:</p>
<ul>
<li>One primary chain ("Layer X")
<ul>
<li><a href="#vault-bridge-token">Vault Bridge Token</a></li>
<li><a href="#migration-manager">Migration Manager</a></li>
</ul>
</li>
<li>Many secondary chains ("Layer Y")
<ul>
<li><a href="#custom-token">Custom Token</a></li>
<li><a href="#native-converter">Native Converter</a></li>
</ul>
</li>
</ul>
<h3 id="tldr"><a class="header" href="#tldr">TL;DR</a></h3>
<p>Select assets are bridged from Layer X to Layer Y. These assets are deposited into Vault Bridge Token contract on Layer X, which mints and bridges vbToken to Layer Y. Deposited assets are used to generate yield on Layer X, while bridged vbTokens are used in DeFi on Layer Y. Generated yield gets distributed to chains and apps participating in the revenue sharing program.</p>
<p>Native Converter contract can be deployed on Layer Y to enable acquisition of vbToken on Layer Y without having to bridge from Layer X. Accumulated backing in Native Converter on Layer Y gets migrated to Layer X and deposited into Vault Bridge Token contract.</p>
<h3 id="vault-bridge-token"><a class="header" href="#vault-bridge-token">Vault Bridge Token</a></h3>
<p>A Vault Bridge Token is:</p>
<ul>
<li><a href="https://eips.ethereum.org/EIPS/eip-20">ERC-20</a> token</li>
<li><a href="https://eips.ethereum.org/EIPS/eip-4626">ERC-4626</a> vault</li>
<li><a href="https://github.com/agglayer/agglayer-contracts">Unified Bridge</a> extension</li>
</ul>
<p>Assets in high demand with available yield strategies, such as WETH and USDC, can get their versions of vbTokens. The underlying asset is deposited into Vault Bridge Token contract, and vbToken is minted in a 1:1 ratio. The same can be withdrawn by burning vbToken. Vault Bridge Token contract doubles a pseudo bridge, so vbToken can be minted and bridged, or claimed and redeemed, in a single call. Deposited underlying assets are put into an external, ERC-4626 compatible vault ("yield vault") where they generate yield. Yield is distributed to chains and apps that participate in the revenue sharing program. Vault Bridge Token contracts also includes functionality that enables minting of vbToken directly on Layer Y via Native Converter, with backing migration to Layer X via Migration Manager.</p>
<h3 id="migration-manager"><a class="header" href="#migration-manager">Migration Manager</a></h3>
<p>The Migration Manager is:</p>
<ul>
<li><a href="#vault-bridge-token">Vault Bridge Token</a> dependency</li>
</ul>
<p>vbTokens can be minted directly on Layer Y. In order for an underlying asset that backs vbToken minted on Layer Y to be deposited in Vault Bridge Token contract on Layer X, backing is migrated to Layer X via Native Converter and Migration Manager. Migration Manager completes migrations by interacting with Vault Bridge Token contract. All vbTokens share the same Migration Manager contract.</p>
<h3 id="custom-token"><a class="header" href="#custom-token">Custom Token</a></h3>
<p>A Custom Token is:</p>
<ul>
<li><a href="https://eips.ethereum.org/EIPS/eip-20">ERC-20</a> token</li>
</ul>
<p>Bridged vbToken can be upgraded to Custom Token on Layer Y. This enables custom behavior, such as bridged vbETH to integrate WETH9 interface, replacing WETH on Layer Y.</p>
<h3 id="native-converter"><a class="header" href="#native-converter">Native Converter</a></h3>
<p>A Native Converter is:</p>
<ul>
<li><a href="#vault-bridge-token">Vault Bridge Token</a> extension</li>
<li><a href="https://github.com/agglayer/agglayer-contracts">Unified Bridge</a> extension</li>
</ul>
<p>Native Converter can be deployed on Layer Y to enable minting of vbToken directly on Layer Y by converting the bridged underlying asset, in a 1:1 ratio. The same can be deconverted to by burning bridged vbToken. Accumulated backing in Native Converter on Layer Y can be migrated to Layer X to be deposited into Vault Bridge Token contract via Migration Manger. For this reason, liqudity for deconverting to the bridged underlying token on Layer Y is guaranteed only up to a certain percentage. Native Converter doubles a bridge extension, so vbToken can be deconverted and bridged in a single call.</p>
<h2 id="get-started"><a class="header" href="#get-started">Get Started</a></h2>
<p>Getting started should be easy as Vault Bridge Token contracts follow the ERC-4626 interface. Variants of the standard ERC-4626 functions include <code>depositAndBridge</code> and <code>claimAndRedeem</code>. Please see <a href="#documentation">Documentation</a> for more information.</p>
<p>If your chain is part of Agglayer, you can start using the official vbTokens immediately. Please note that you will get vbToken when bridging, not the underlying token, therefore activity should be incentivized in vbToken. You must participate in the revenue sharing program in order to receive yield. <a href="https://info.polygon.technology/vaultbridge-intake-form">Contact our team</a> if interested in revenue sharing.</p>
<p>If your chain is not part of Agglayer, you can start using the official vbTokens immediately. Please note that you will need to use a third-party bridge to bridge vbTokens to your chain, and Native Converter functionality will not be supported. You must participate in the revenue sharing program in order to receive yield. <a href="https://info.polygon.technology/vaultbridge-intake-form">Contact our team</a> if interested in revenue sharing.</p>
<p>Full support for non-Agglayer chains, third-party bridges, as well as non-EVM chains is coming soon. <a href="https://info.polygon.technology/vaultbridge-intake-form">Contact our team</a> to register interest.</p>
<h2 id="documentation"><a class="header" href="#documentation">Documentation</a></h2>
<ul>
<li><a href="https://docs.agglayer.dev/">General Documentation</a></li>
<li><a href="https://agglayer.github.io/vault-bridge/">Technical Reference</a></li>
<li>In addition to General Documentation and Technical Reference, the <a href="https://github.com/agglayer/vault-bridge/tree/main/src">source code</a> is 100% documented and you are encouraged to check it out.</li>
</ul>
<h2 id="deployments"><a class="header" href="#deployments">Deployments</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Contract</th><th>Address</th></tr></thead><tbody>
<tr><td>1</td><td>Vault Bridge ETH</td><td><a href="http://etherscan.io/address/0x2DC70fb75b88d2eB4715bc06E1595E6D97c34DFF"><code>0x2DC70fb75b88d2eB4715bc06E1595E6D97c34DFF</code></a></td></tr>
<tr><td>1</td><td>Vault Bridge USDC</td><td><a href="http://etherscan.io/address/0x53E82ABbb12638F09d9e624578ccB666217a765e"><code>0x53E82ABbb12638F09d9e624578ccB666217a765e</code></a></td></tr>
<tr><td>1</td><td>Vault Bridge USDT</td><td><a href="http://etherscan.io/address/0x6d4f9f9f8f0155509ecd6Ac6c544fF27999845CC"><code>0x6d4f9f9f8f0155509ecd6Ac6c544fF27999845CC</code></a></td></tr>
<tr><td>1</td><td>Vault Bridge WBTC</td><td><a href="http://etherscan.io/address/0x2C24B57e2CCd1f273045Af6A5f632504C432374F"><code>0x2C24B57e2CCd1f273045Af6A5f632504C432374F</code></a></td></tr>
<tr><td>1</td><td>Vault Bridge USDS</td><td><a href="http://etherscan.io/address/0x3DD459dE96F9C28e3a343b831cbDC2B93c8C4855"><code>0x3DD459dE96F9C28e3a343b831cbDC2B93c8C4855</code></a></td></tr>
<tr><td>1</td><td>Migration Manager</td><td><a href="http://etherscan.io/address/0x417d01B64Ea30C4E163873f3a1f77b727c689e02"><code>0x417d01B64Ea30C4E163873f3a1f77b727c689e02</code></a></td></tr>
<tr><td>747474</td><td>Bridged Vault Bridge ETH</td><td><a href="https://katanascan.com/address/0xEE7D8BCFb72bC1880D0Cf19822eB0A2e6577aB62"><code>0xEE7D8BCFb72bC1880D0Cf19822eB0A2e6577aB62</code></a></td></tr>
<tr><td>747474</td><td>Bridged Vault Bridge USDC</td><td><a href="https://katanascan.com/address/0x203A662b0BD271A6ed5a60EdFbd04bFce608FD36"><code>0x203A662b0BD271A6ed5a60EdFbd04bFce608FD36</code></a></td></tr>
<tr><td>747474</td><td>Bridged Vault Bridge USDT</td><td><a href="https://katanascan.com/address/0x2DCa96907fde857dd3D816880A0df407eeB2D2F2"><code>0x2DCa96907fde857dd3D816880A0df407eeB2D2F2</code></a></td></tr>
<tr><td>747474</td><td>Bridged Vault Bridge WBTC</td><td><a href="https://katanascan.com/address/0x0913DA6Da4b42f538B445599b46Bb4622342Cf52"><code>0x0913DA6Da4b42f538B445599b46Bb4622342Cf52</code></a></td></tr>
<tr><td>747474</td><td>Bridged Vault Bridge USDS</td><td><a href="https://katanascan.com/address/0x62D6A123E8D19d06d68cf0d2294F9A3A0362c6b3"><code>0x62D6A123E8D19d06d68cf0d2294F9A3A0362c6b3</code></a></td></tr>
<tr><td>747474</td><td>Vault Bridge ETH Native Converter</td><td><a href="https://katanascan.com/address/0xa6b0db1293144ebe9478b6a84f75dd651e45914a"><code>0xa6b0db1293144ebe9478b6a84f75dd651e45914a</code></a></td></tr>
<tr><td>747474</td><td>Vault Bridge USDC Native Converter</td><td><a href="https://katanascan.com/address/0x97a3500083348A147F419b8a65717909762c389f"><code>0x97a3500083348A147F419b8a65717909762c389f</code></a></td></tr>
<tr><td>747474</td><td>Vault Bridge USDT Native Converter</td><td><a href="https://katanascan.com/address/0x053FA9b934b83E1E0ffc7e98a41aAdc3640bB462"><code>0x053FA9b934b83E1E0ffc7e98a41aAdc3640bB462</code></a></td></tr>
<tr><td>747474</td><td>Vault Bridge WBTC Native Converter</td><td><a href="https://katanascan.com/address/0xb00aa68b87256E2F22058fB2Ba3246EEc54A44fc"><code>0xb00aa68b87256E2F22058fB2Ba3246EEc54A44fc</code></a></td></tr>
<tr><td>747474</td><td>Vault Bridge USDS Native Converter</td><td><a href="https://katanascan.com/address/0x639f13D5f30B47c792b6851238c05D0b623C77DE"><code>0x639f13D5f30B47c792b6851238c05D0b623C77DE</code></a></td></tr>
</tbody></table>
</div>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>Clone:</p>
<pre><code>git clone git@github.com:agglayer/vault-bridge.git
</code></pre>
<p>Install:</p>
<pre><code>forge soldeer install &amp; npm install
</code></pre>
<p>Build:</p>
<pre><code>forge build
</code></pre>
<p>Test:</p>
<pre><code>forge test
</code></pre>
<p>Coverage:</p>
<pre><code>forge coverage --ir-minimum --report lcov &amp;&amp; genhtml -o coverage lcov.info
</code></pre>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>This codebase is licensed under Source Available License.</p>
<p>See <a href="https://github.com/agglayer/vault-bridge/blob/main/LICENSE-SOURCE-AVAILABLE"><code>LICENSE-SOURCE-AVAILABLE</code></a>.</p>
<p>Your use of this software constitutes acceptance of these license terms.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="src/custom-tokens/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next prefetch" href="src/custom-tokens/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>


    </div>
    </body>
</html>
